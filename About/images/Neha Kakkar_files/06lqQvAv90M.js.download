if (self.CavalryLogger) { CavalryLogger.start_js(["B9dQf"]); }

__d("VideoSettingsControl.react",["ix","cx","fbt","AbstractButton.react","BanzaiODS","ClickableArea.react","Image.react","React","ReactDOM","VideoSettingsMenu.react","TooltipData","VideoPlayerExperiments","asset","setImmediate","shallowCompare"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes,n=720,o=2160;k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(q){"use strict";l.constructor.call(this,q);this.state={isFocus:false}}p.prototype.shouldComponentUpdate=function(q,r){"use strict";return c("shallowCompare")(this,q,r)};p.prototype.onClick=function(){"use strict";if(!this.state.isFocus&&!this.props.disabled&&this.refs.menu&&this.refs.menu.showQualitySelector())c("BanzaiODS").bumpEntityKey("videos","quality_selector.impression");this.setState(function(q){return{isFocus:!q.isFocus}});this.props.onSettingsClick&&this.props.onSettingsClick()};p.prototype.getHDIndicator=function(){"use strict";__p&&__p();var q=c("VideoPlayerExperiments").showHDIndicator&&!this.props.isInline&&this.props.selectedQuality&&(this.props.selectedQuality=="HD"||parseInt(this.props.selectedQuality,10)>=n),r=null;if(q){var s=null;if(parseInt(this.props.selectedQuality,10)>=o)s="4K";else s="HD";r=c("React").createElement("span",{className:"_132c"},s)}return r};p.prototype.render=function(){"use strict";var q=c("React").createElement(c("Image.react"),{className:"_rwt",src:h("391244")}),r=j._("Additional visual settings"),s=null;if(!this.props.disabled&&this.state.isFocus)s=c("React").createElement("div",{className:"_2iw7"+(this.state.isFocus?" _2iw8":"")},c("React").createElement(c("VideoSettingsMenu.react"),{areSubtitlesActive:this.props.areSubtitlesActive,hasHD:this.props.hasHD,hasSubtitles:this.props.hasSubtitles,isHD:this.props.isHD,isLive:this.props.isLive,isSphericalVideo:this.props.isSphericalVideo,onToggleHD:this.props.onToggleHD,onToggleSubtitles:this.props.onToggleSubtitles,tabIndex:this.props.tabIndex,availableQualities:this.props.availableQualities,selectedQuality:this.props.selectedQuality,canAutoSelectVideoQuality:this.props.canAutoSelectVideoQuality,onSelectQuality:this.props.onSelectQuality,showQualitySelector:this.props.showQualitySelector,qualitySelectorMinStreams:this.props.qualitySelectorMinStreams,streamingFormat:this.props.streamingFormat,videoID:this.props.videoID,ref:"menu"}));var t=this.getHDIndicator(),u="_zbd"+(this.props.disabled?" _132h":""),v=j._("Settings"),w=c("React").createElement(c("AbstractButton.react"),{className:u,disabled:this.props.disabled,image:q,label:r,labelIsHidden:true,ref:"button",tabIndex:this.props.tabIndex,type:"button"});return c("React").createElement("div",{className:"_2j04"},s,c("React").createElement(c("ClickableArea.react"),babelHelpers["extends"]({},c("TooltipData").propsFor(v,"above"),{onClick:this.onClick.bind(this)}),c("React").createElement("div",null,w,t)))};p.propTypes={disabled:m.bool,hasHD:m.bool,hasSubtitles:m.bool,isHD:m.bool,isInline:m.bool,isLive:m.bool,isSphericalVideo:m.bool,areSubtitlesActive:m.bool,onToggleHD:m.func,onToggleSubtitles:m.func,tabIndex:m.string,availableQualities:m.array,selectedQuality:m.string,canAutoSelectVideoQuality:m.bool,onSelectQuality:m.func,showQualitySelector:m.bool,qualitySelectorMinStreams:m.number,streamingFormat:m.string};p.defaultProps={tabIndex:"-1"};f.exports=p}),null);